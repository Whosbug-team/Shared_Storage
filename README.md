# Whosbug开源规划

`whosbug`经手了多个团队的近20人，历史团队中：大家分别负责插件和数据流转的设计实现和优化、责任归属算法的设计实现与优化、`antlr`语法`AST`分析的多语言适配实现以及项目协同的管理；当前主要由`kevineluo`和`kevinmatthe`负责维护以及开源相关的规划，同时也有这个开源小组的其它几位同学一起协作共建`whosbug`的开源版本

## 规划

短期内优先支持完成`whosbug`内网版本的落地，同步进行一些架构上的调整，对齐开源标准等；长期来看则是对`whosbug`的其它落地场景的探索、`Keyman`算法的进一步优化等

## 定期会议

根据收集到的问卷统计，暂定每周五的`10:00-10:30`，视情况调整

## 时间投入

根据收集到的问卷统计来看，大部分同学除了周末都没有太多时间，这里我们初步设定每人每周发放约8小时的工作

## 需要解决的技术问题

1. #### python等语言解析的支持

   Antlr-Golang语法解析框架目前部分缺失解析`python`文件的处理库，无法进行语法解析

2. #### 多种语言都存在的库文件(如*.h文件)、混合编译的源码的解析标准

3. #### 部分语言中存在类似`import xx as yy`的情况，需要额外分析`import`语句才能得到有效的调用链

4. #### 同一项目下有多个可执行子项目

   一个仓库中有多个子项目，**不同目录**下存在同名的方法：如目录`src/main`和`test/main`下均有方法/类`MainActivity`，存在该方法调用的函数`calling`中无法准确定位调用来源，且会存在无法唯一标识的现象

5. #### 部分语言(如c++)不能保证方法调用准确解析

   导致语法树不完整，`Keyman`算法无法得到较为可信的结果

6. #### 调用链关系存储方式效率低下

   目前仍采用传统的`DBMS`数据库进行存储，更新操作较为繁琐，效率低下

7. #### 系统测试

   由于测试数据的收集难度较高，`whosbug`一直缺少一些系统测试；一个得不到验证的系统是没有说服力的

   `whosbug`在内网这边正在进行完整的更新和发布，这里或许可以在一些项目上得到验证，收取到一些认可度；但同时我们也可以主动的设计一些测试方案来“自圆其说”一下

## 需要解决的架构问题

1. #### config从模块解耦

2. #### 拆分whosbug-ASTtracker(名称暂定)解析模块作为`go module`开源发布（未来可作为其他用途复用）

3. #### whosbug-webservice接口标准化重构(目前和RESTFUL的标准还有距离)

4. #### Whosbug-webservice没有为多个请求适配，同时只能处理一个请求

## 功能 / 算法预研

1. #### 后台的解密client

   用于观察数据库内的加密数据，（要做好鉴权，不然加密全部木大）

2. #### [Grafana Dashboard](https://grafana.com/grafana/)

   用于宏观数据的观察（各接口请求量，耗时等）、告警配置以及[`SRE`](https://sre.google/)标准化的建设

3. #### Keyman算法优化

   [目前的算法](https://kevinello.ltd/2021/10/13/Keyman%E7%AE%97%E6%B3%95%E8%AE%BE%E8%AE%A1%E5%93%B2%E5%AD%A6/)在先验 / 后验概率维度上有改进的空间，可以与[`rebucket`算法](https://kevinello.ltd/2020/12/08/ReBucket%E7%AE%97%E6%B3%95%E6%80%BB%E7%BB%93/) /[ TraceSim算法](https://kevinello.ltd/2021/10/08/TraceSim%E7%AE%97%E6%B3%95%E6%B7%B1%E5%85%A5%E6%B5%85%E5%87%BA/)联动

   超参数训练模块还有待开发（可以参考`kevineluo`写的`rebucket`超参数训练模块进行改进 / 使用灵活性较高的开源框架）

